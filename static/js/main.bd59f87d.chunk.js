(this["webpackJsonpcurso-react-router-proyecto2"]=this["webpackJsonpcurso-react-router-proyecto2"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,o){},function(e,t,o){},function(e,t,o){},function(e,t,o){},function(e,t,o){},function(e,t,o){},function(e,t,o){},function(e,t,o){},function(e,t,o){},function(e,t,o){},function(e,t,o){},function(e,t,o){"use strict";o.r(t);var n=o(0),r=o.n(n),c=o(5),a=o.n(c),s=o(4),l=o(3);function i(e,t){const[o,n]=r.a.useReducer(j,d({initialValue:t})),{sincronizedItem:c,error:a,loading:s,item:l}=o,i=e=>n({type:u.error,payload:e});r.a.useEffect((()=>{setTimeout((()=>{try{const o=localStorage.getItem(e);let r;o?r=JSON.parse(o):(localStorage.setItem(e,JSON.stringify(t)),r=t),(e=>{n({type:u.success,payload:e})})(r)}catch(a){i(a)}}),3e3)}),[c]);return{item:l,saveItem:t=>{try{const o=JSON.stringify(t);localStorage.setItem(e,o),(e=>{n({type:u.save,payload:e})})(t)}catch(a){i(a)}},loading:s,error:a,sincronizeItem:()=>{n({type:u.sincronize})}}}const d=e=>{let{initialValue:t}=e;return{sincronizedItem:!0,error:!1,loading:!0,item:t}},u={error:"ERROR",success:"SUCCESS",save:"SAVE",sincronize:"SINCRONIZE"},j=(e,t)=>((e,t)=>({[u.error]:{...e,error:!0},[u.success]:{...e,error:!1,loading:!1,sincronizedItem:!0,item:t},[u.save]:{...e,item:t},[u.sincronize]:{...e,sincronizedItem:!1,loading:!0}}))(e,t.payload)[t.type]||e;function b(){const{item:e,saveItem:t,sincronizeItem:o,loading:n,error:c}=i("TODOS_V2",[]),[a,s]=r.a.useState(""),l=e.filter((e=>!!e.completed)).length,d=e.length;let u=[];u=!a.length>=1?e:e.filter((e=>{const t=e.text.toLowerCase(),o=a.toLowerCase();return t.includes(o)}));return{state:{loading:n,error:c,totalTodos:d,completedTodos:l,searchValue:a,searchedTodos:u,getTodo:t=>{const o=e.findIndex((e=>e.id===t));return e[o]}},stateUpdaters:{setSearchValue:s,addTodo:o=>{const n=function(e){if(!e.length)return 1;const t=e.map((e=>e.id));return Math.max(...t)+1}(e),r=[...e];r.push({completed:!1,text:o,id:n}),t(r)},completeTodo:o=>{const n=e.findIndex((e=>e.id===o)),r=[...e];r[n].completed=!0,t(r)},editTodo:(o,n)=>{const r=e.findIndex((e=>e.id===o)),c=[...e];c[r].text=n,t(c)},deleteTodo:o=>{const n=e.findIndex((e=>e.id===o)),r=[...e];r.splice(n,1),t(r)},sincronizeTodos:o}}}var m=o(2);function p(e){let{children:t,loading:o}=e;return Object(m.jsx)("header",{children:r.a.Children.toArray(t).map((e=>r.a.cloneElement(e,{loading:o})))})}o(12);function h(e){let{totalTodos:t,completedTodos:o,loading:n}=e;return Object(m.jsxs)("h2",{className:`TodoCounter ${!!n&&"TodoCounter--loading"}`,children:["Has completado ",o," de ",t," Tareas"]})}o(13);function x(e){let{searchValue:t,setSearchValue:o,loading:n}=e;return Object(m.jsx)("input",{className:"TodoSearch",placeholder:"Escribir Tareas",value:t,onChange:e=>{console.log(e.target.value),o(e.target.value)},disabled:n})}var O;o(14);function f(e){const t=e.children||e.render;return Object(m.jsxs)("section",{className:"TodoList-container",children:[e.error&&e.onError(),e.loading&&e.onLoading(),!e.loading&&!e.totalTodos&&e.onEmptyTodos(),!!e.totalTodos&&!e.searchedTodos.length&&e.onEmptySearchResults(e.searchText),!e.loading&&!e.error&&e.searchedTodos.map(t)]})}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)({}).hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},g.apply(null,arguments)}function T(e,t){let{title:o,titleId:r,...c}=e;return n.createElement("svg",g({viewBox:"0 0 405.272 405.272",xmlSpace:"preserve",ref:t,"aria-labelledby":r},c),o?n.createElement("title",{id:r},o):null,O||(O=n.createElement("path",{d:"M393.401,124.425L179.603,338.208c-15.832,15.835-41.514,15.835-57.361,0L11.878,227.836 c-15.838-15.835-15.838-41.52,0-57.358c15.841-15.841,41.521-15.841,57.355-0.006l81.698,81.699L336.037,67.064 c15.841-15.841,41.523-15.829,57.358,0C409.23,82.902,409.23,108.578,393.401,124.425z"})))}const v=n.forwardRef(T);var y,C;o.p;function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)({}).hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},E.apply(null,arguments)}function I(e,t){let{title:o,titleId:r,...c}=e;return n.createElement("svg",E({viewBox:"0 0 24 24",fill:"none",xmlns:"https://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},c),o?n.createElement("title",{id:r},o):null,y||(y=n.createElement("path",{d:"M0 18.9993V24H5.00069L19.756 9.24459L14.7553 4.2439L0 18.9993Z"})),C||(C=n.createElement("path",{d:"M23.6099 3.5038L20.4961 0.390054C19.9761 -0.130018 19.1293 -0.130018 18.6092 0.390054L16.1689 2.83039L21.1695 7.83108L23.6099 5.39074C24.13 4.87067 24.13 4.02387 23.6099 3.5038Z"})))}const S=n.forwardRef(I);var N;o.p;function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)({}).hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},w.apply(null,arguments)}function L(e,t){let{title:o,titleId:r,...c}=e;return n.createElement("svg",w({viewBox:"0 0 348.333 348.334",xmlSpace:"preserve",ref:t,"aria-labelledby":r},c),o?n.createElement("title",{id:r},o):null,N||(N=n.createElement("path",{d:"M336.559,68.611L231.016,174.165l105.543,105.549c15.699,15.705,15.699,41.145,0,56.85 c-7.844,7.844-18.128,11.769-28.407,11.769c-10.296,0-20.581-3.919-28.419-11.769L174.167,231.003L68.609,336.563 c-7.843,7.844-18.128,11.769-28.416,11.769c-10.285,0-20.563-3.919-28.413-11.769c-15.699-15.698-15.699-41.139,0-56.85 l105.54-105.549L11.774,68.611c-15.699-15.699-15.699-41.145,0-56.844c15.696-15.687,41.127-15.687,56.829,0l105.563,105.554 L279.721,11.767c15.705-15.687,41.139-15.687,56.832,0C352.258,27.466,352.258,52.912,336.559,68.611z"})))}const k=n.forwardRef(L);o.p,o(15);const z={check:e=>Object(m.jsx)(v,{className:"Icon-svg Icon-svg--check",fill:e}),edit:e=>Object(m.jsx)(S,{className:"Icon-svg Icon-svg--edit",fill:e}),delete:e=>Object(m.jsx)(k,{className:"Icon-svg Icon-svg--delete",fill:e})};function V(e){let{type:t,color:o="gray",onClick:n}=e;return Object(m.jsx)("span",{className:`Icon-container Icon-container--${t}`,onClick:n,children:z[t](o)})}function D(e){let{completed:t,onComplete:o}=e;return Object(m.jsx)(V,{type:"check",color:t?"#4caf50":"gray",onClick:o})}function R(e){let{onEdit:t}=e;return Object(m.jsx)(V,{type:"edit",onClick:t})}function F(e){let{onDelete:t}=e;return Object(m.jsx)(V,{type:"delete",onClick:t})}o(16);function A(e){return Object(m.jsxs)("li",{className:"TodoItem",children:[Object(m.jsx)(D,{completed:e.completed,onComplete:e.onComplete}),Object(m.jsx)("p",{className:`TodoItem-p ${e.completed&&"TodoItem-p--complete"}`,children:e.text}),Object(m.jsx)(F,{onDelete:e.onDelete}),Object(m.jsx)(R,{onEdit:e.onEdit})]})}function B(){return Object(m.jsx)("p",{children:"Desesp\xe9rate, hubo un error..."})}o(17);function J(){return Object(m.jsxs)("div",{className:"LoadingTodo-container",children:[Object(m.jsx)("span",{className:"LoadingTodo-completeIcon"}),Object(m.jsx)("p",{className:"LoadingTodo-text",children:"Cargando Tareas..."}),Object(m.jsx)("span",{className:"LoadingTodo-deleteIcon"})]})}function M(){return Object(m.jsx)("p",{children:"\xa1Crea tu primer Tarea!"})}o(18);var U=function(e){let{label:t,submitText:o,submitEvent:n,defaultTodoText:c}=e;const a=Object(l.p)(),[s,i]=r.a.useState(c||"");return Object(m.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(s),a("/")},children:[Object(m.jsx)("label",{children:t}),Object(m.jsx)("textarea",{value:s,onChange:e=>{i(e.target.value)},placeholder:"Escribir Tarea"}),Object(m.jsxs)("div",{className:"TodoForm-buttonContainer",children:[Object(m.jsx)("button",{type:"button",className:"TodoForm-button TodoForm-button--cancel",onClick:()=>{a("/")},children:"Cancelar"}),Object(m.jsx)("button",{type:"submit",className:"TodoForm-button TodoForm-button--add",children:o})]})]})};o(19);function P(e){return Object(m.jsx)("button",{className:"CreateTodoButton",onClick:e.onClick,children:"+"})}o(20);o(21);function H(e){let{sincronize:t}=e;const{show:o,toggleShow:n}=function(e){const[t,o]=r.a.useState(!1);return window.addEventListener("storage",(e=>{"TODOS_V1"===e.key&&(console.log("Hubo cambios en TODOS_V1"),o(!0))})),{show:t,toggleShow:()=>{e(),o(!1)}}}(t);return o?Object(m.jsx)("div",{className:"ChangeAlert-bg",children:Object(m.jsxs)("div",{className:"ChangeAlert-container",children:[Object(m.jsx)("p",{children:"Parece que cambiaste tus TODOs en otra pesta\xf1a o ventana del navegador."}),Object(m.jsx)("p",{children:"\xbfQuieres sincronizar tus TODOs?"}),Object(m.jsx)("button",{className:"TodoForm-button TodoForm-button--add",onClick:n,children:"Yes!"})]})}):null}function Z(){const e=Object(l.p)(),{state:t,stateUpdaters:o}=b(),{error:n,loading:c,searchedTodos:a,totalTodos:s,completedTodos:i,searchValue:d}=t,{completeTodo:u,deleteTodo:j,setSearchValue:O,sincronizeTodos:g}=o;return Object(m.jsxs)(r.a.Fragment,{children:[Object(m.jsxs)(p,{loading:c,children:[Object(m.jsx)(h,{totalTodos:s,completedTodos:i}),Object(m.jsx)(x,{searchValue:d,setSearchValue:O})]}),Object(m.jsx)(f,{error:n,loading:c,totalTodos:s,searchedTodos:a,searchText:d,onError:()=>Object(m.jsx)(B,{}),onLoading:()=>Object(m.jsx)(J,{}),onEmptyTodos:()=>Object(m.jsx)(M,{}),onEmptySearchResults:e=>Object(m.jsxs)("p",{children:["No hay resultados para ",e]}),children:t=>Object(m.jsx)(A,{text:t.text,completed:t.completed,onEdit:()=>{e("/edit/"+t.id,{state:{todo:t}})},onComplete:()=>u(t.id),onDelete:()=>j(t.id)},t.id)}),Object(m.jsx)(P,{onClick:()=>e("/new")}),Object(m.jsx)(H,{sincronize:g})]})}var $=function(){const{stateUpdaters:e}=b(),{addTodo:t}=e;return Object(m.jsx)(U,{label:"Escribe tu nueva Tarea",submitText:"A\xf1adir",submitEvent:e=>t(e)})};var _=function(){var e;const t=Object(l.n)(),o=Object(l.r)(),n=Number(o.id),{state:r,stateUpdaters:c}=b(),{loading:a,getTodo:s}=r,{editTodo:i}=c;let d;if(null!==(e=t.state)&&void 0!==e&&e.todo)d=t.state.todo.text;else{if(a)return Object(m.jsx)("p",{children:"Cargando..."});d=s(n).text}return Object(m.jsx)(U,{label:"Edita tu Tarea",defaultTodoText:d,submitText:"Editar",submitEvent:e=>i(n,e)})};function q(){return Object(m.jsx)(s.a,{children:Object(m.jsxs)(l.c,{children:[Object(m.jsx)(l.a,{path:"/",element:Object(m.jsx)(Z,{})}),Object(m.jsx)(l.a,{path:"/new",element:Object(m.jsx)($,{})}),Object(m.jsx)(l.a,{path:"/edit/:id",element:Object(m.jsx)(_,{})}),Object(m.jsx)(l.a,{path:"*",element:Object(m.jsx)("p",{children:"Not Found"})})]})})}o(22);a.a.render(Object(m.jsx)(q,{}),document.getElementById("root"))}],[[23,1,2]]]);
//# sourceMappingURL=main.bd59f87d.chunk.js.map